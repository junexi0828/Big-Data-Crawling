# Raspberry Pi Netplan Configuration Example
# 라즈베리파이 네트워크 설정 예제
#
# 사용 방법:
# 1. 이 파일을 복사: cp netplan-config.yaml.example netplan-config.yaml
# 2. WIFI_SSID와 WIFI_PASSWORD를 실제 값으로 변경
# 3. 라즈베리파이에 적용:
#    scp netplan-config.yaml ubuntu@raspberry-master:/tmp/
#    ssh ubuntu@raspberry-master "sudo mv /tmp/netplan-config.yaml /etc/netplan/99-static-ip.yaml"
#    ssh ubuntu@raspberry-master "sudo chmod 600 /etc/netplan/99-static-ip.yaml"
#    ssh ubuntu@raspberry-master "sudo netplan apply"

network:
  version: 2

  # 유선 네트워크 설정
  ethernets:
    eth0:
      dhcp4: no
      addresses:
        - 192.168.0.100/24  # Master: .100, Worker1: .101, Worker2: .102, Worker3: .103
      routes:
        - to: default
          via: 192.168.0.1   # 공유기 게이트웨이 IP
          metric: 100        # 유선 우선순위 (낮을수록 우선)
      nameservers:
        addresses:
          - 8.8.8.8          # Google DNS
          - 8.8.4.4

  # 무선 네트워크 설정 (백업용)
  wifis:
    wlan0:
      dhcp4: no
      addresses:
        - 192.168.0.100/24  # 유선과 동일 IP (자동 전환)
      routes:
        - to: default
          via: 192.168.0.1
          metric: 200        # 무선 우선순위 (유선보다 낮음)
      nameservers:
        addresses:
          - 8.8.8.8
          - 8.8.4.4
      access-points:
        "YOUR_WIFI_SSID":    # ← 실제 WiFi 이름으로 변경 (예: "iptime", "MyHomeWiFi")
          password: "YOUR_WIFI_PASSWORD"  # ← 실제 WiFi 비밀번호로 변경

# 설정 예시:
#
# Master Node (192.168.0.100):
#   addresses: - 192.168.0.100/24
#
# Worker Node 1 (192.168.0.101):
#   addresses: - 192.168.0.101/24
#
# Worker Node 2 (192.168.0.102):
#   addresses: - 192.168.0.102/24
#
# Worker Node 3 (192.168.0.103):
#   addresses: - 192.168.0.103/24

# 실제 설정 예시:
# access-points:
#   "iptime":
#     password: "01027270147"

# 주의사항:
# 1. 파일 권한은 반드시 600으로 설정 (보안)
# 2. 유선과 무선의 metric 값으로 우선순위 결정
#    - metric 100 (유선) < metric 200 (무선) → 유선 우선
# 3. 유선이 연결되어 있으면 유선 사용, 끊기면 자동으로 무선 전환
# 4. IP 주소는 노드별로 고유하게 설정
