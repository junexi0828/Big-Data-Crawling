# íŒŒì´í”„ë¼ì¸ ë¡œê·¸ ì„¤ì • ì ê²€ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2025-12-07
**ëª©ì **: ê° íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ì—ì„œ ë¡œê·¸ê°€ ì œëŒ€ë¡œ ì €ì¥ë˜ê³  ìˆëŠ”ì§€ ì „ìˆ˜ ì¡°ì‚¬ ë° ê°œì„ 

---

## ğŸ“‹ ê°œìš”

íŒŒì´í”„ë¼ì¸ì˜ ê° ë‹¨ê³„ì—ì„œ ìƒì„±ë˜ëŠ” ë¡œê·¸ê°€ ì ì ˆí•œ ì €ì¥ì†Œì— ì €ì¥ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ëˆ„ë½ëœ ë¡œê·¸ íŒŒì¼ ì„¤ì •ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

---

## âœ… ì ê²€ ê²°ê³¼ ìš”ì•½

### 1. Scrapy ìŠ¤íŒŒì´ë”

- **ìƒíƒœ**: âœ… ì •ìƒ
- **ë¡œê·¸ íŒŒì¼**: `logs/scrapy.log`
- **ì„¤ì • ìœ„ì¹˜**: `worker-nodes/cointicker/settings.py`
- **ì„¤ì • ë‚´ìš©**:
  ```python
  LOG_LEVEL = "INFO"
  LOG_FILE = "logs/scrapy.log"
  ```

### 2. Kafka Pipeline

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/kafka_pipeline.log`
- **ì„¤ì • ìœ„ì¹˜**: `worker-nodes/cointicker/pipelines/kafka_pipeline.py`
- **ë³€ê²½ ì‚¬í•­**: `setup_logger(__name__)`ì— `log_file` íŒŒë¼ë¯¸í„° ì¶”ê°€

### 3. Kafka Consumer

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/kafka_consumer.log`
- **ì„¤ì • ìœ„ì¹˜**: `worker-nodes/kafka/kafka_consumer.py`
- **ë³€ê²½ ì‚¬í•­**: `setup_logger(__name__)`ì— `log_file` íŒŒë¼ë¯¸í„° ì¶”ê°€

### 4. Kafka Client (Producer/Consumer ê³µí†µ)

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/kafka_client.log`
- **ì„¤ì • ìœ„ì¹˜**: `shared/kafka_client.py`
- **ë³€ê²½ ì‚¬í•­**: loguru íŒŒì¼ í•¸ë“¤ëŸ¬ ì¶”ê°€ (10MB íšŒì „, 7ì¼ ë³´ê´€)

### 5. HDFS Client

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/hdfs_client.log`
- **ì„¤ì • ìœ„ì¹˜**: `shared/hdfs_client.py`
- **ë³€ê²½ ì‚¬í•­**: `logging.getLogger(__name__)`ë¥¼ `setup_logger(__name__, log_file=...)`ë¡œ ë³€ê²½

### 6. HDFS Upload Manager

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/hdfs_upload_manager.log`
- **ì„¤ì • ìœ„ì¹˜**: `shared/hdfs_upload_manager.py`
- **ë³€ê²½ ì‚¬í•­**: `logging.getLogger(__name__)`ë¥¼ `setup_logger(__name__, log_file=...)`ë¡œ ë³€ê²½

### 7. Backend API

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/backend_api.log`
- **ì„¤ì • ìœ„ì¹˜**: `backend/app.py`
- **ë³€ê²½ ì‚¬í•­**: `logging.getLogger(__name__)`ë¥¼ `setup_logger(__name__, log_file=...)`ë¡œ ë³€ê²½

### 8. GUI ì• í”Œë¦¬ì¼€ì´ì…˜

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/gui.log`
- **ì„¤ì • ìœ„ì¹˜**: `gui/app.py`
- **ë³€ê²½ ì‚¬í•­**: `setup_logger(__name__)`ì— `log_file` íŒŒë¼ë¯¸í„° ì¶”ê°€

### 9. Pipeline Orchestrator

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/orchestrator.log`
- **ì„¤ì • ìœ„ì¹˜**: `master-node/orchestrator.py`
- **ë³€ê²½ ì‚¬í•­**: `setup_logger(__name__)`ì— `log_file` íŒŒë¼ë¯¸í„° ì¶”ê°€

### 10. Scheduler

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/scheduler.log`
- **ì„¤ì • ìœ„ì¹˜**: `master-node/scheduler.py`
- **ë³€ê²½ ì‚¬í•­**: `setup_logger(__name__)`ì— `log_file` íŒŒë¼ë¯¸í„° ì¶”ê°€

### 11. Scrapy Pipelines (Validation, Duplicates, HDFS)

- **ìƒíƒœ**: âœ… ê°œì„  ì™„ë£Œ
- **ë¡œê·¸ íŒŒì¼**: `logs/pipelines.log`
- **ì„¤ì • ìœ„ì¹˜**: `worker-nodes/cointicker/pipelines/__init__.py`
- **ë³€ê²½ ì‚¬í•­**: `setup_logger(__name__)`ì— `log_file` íŒŒë¼ë¯¸í„° ì¶”ê°€

### 12. Process Monitor (GUI)

- **ìƒíƒœ**: âœ… ì •ìƒ
- **ë¡œê·¸ íŒŒì¼**: `logs/{process_name}.log` (ë™ì  ìƒì„±)
- **ì„¤ì • ìœ„ì¹˜**: `gui/modules/process_monitor.py`
- **ì„¤ëª…**: GUIì—ì„œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê° í”„ë¡œì„¸ìŠ¤ë³„ë¡œ ë¡œê·¸ íŒŒì¼ ìë™ ìƒì„±

---

## ğŸ“ ë¡œê·¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

### í˜„ì¬ ë¡œê·¸ ë””ë ‰í† ë¦¬ ìœ„ì¹˜

````
PICU/cointicker/
â”œâ”€â”€ logs/                          # ë©”ì¸ ë¡œê·¸ ë””ë ‰í† ë¦¬ (ê¶Œì¥)
â”‚   â”œâ”€â”€ scrapy.log                 # Scrapy ìŠ¤íŒŒì´ë” ë¡œê·¸
â”‚   â”œâ”€â”€ kafka_pipeline.log         # Kafka Pipeline ë¡œê·¸
â”‚   â”œâ”€â”€ kafka_consumer.log         # Kafka Consumer ë¡œê·¸
â”‚   â”œâ”€â”€ kafka_client.log           # Kafka Client ë¡œê·¸ (loguru)
â”‚   â”œâ”€â”€ hdfs_client.log            # HDFS Client ë¡œê·¸
â”‚   â”œâ”€â”€ hdfs_upload_manager.log    # HDFS Upload Manager ë¡œê·¸
â”‚   â”œâ”€â”€ backend_api.log            # Backend API ë¡œê·¸
â”‚   â”œâ”€â”€ gui.log                    # GUI ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
â”‚   â”œâ”€â”€ orchestrator.log           # Pipeline Orchestrator ë¡œê·¸
â”‚   â”œâ”€â”€ scheduler.log              # Scheduler ë¡œê·¸
â”‚   â”œâ”€â”€ pipelines.log              # Scrapy Pipelines ë¡œê·¸
â”‚   â”œâ”€â”€ kafka_consumer.log         # Process Monitorê°€ ìƒì„±í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë³„ ë¡œê·¸
â”‚   â””â”€â”€ spider.log                 # ê¸°ì¡´ ë¡œê·¸ (í˜¸í™˜ì„± ìœ ì§€)
â”‚
â”œâ”€â”€ worker-nodes/
â”‚   â”œâ”€â”€ logs/                      # âš ï¸ ë¼ì¦ˆë² ë¦¬íŒŒì´ ë¡œê·¸ (ì¤‘ë³µ ì•„ë‹˜)
â”‚   â””â”€â”€ cointicker/
â”‚       â””â”€â”€ logs/                  # (í™•ì¸ í•„ìš”)

### ê¶Œì¥ êµ¬ì¡°

ëª¨ë“  ë¡œê·¸ëŠ” `PICU/cointicker/logs/` ë””ë ‰í† ë¦¬ì— í†µí•©í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

## ğŸ”§ ë³€ê²½ ì‚¬í•­ ìƒì„¸

### 1. ê³µí†µ ë¡œê·¸ ìœ í‹¸ë¦¬í‹° (`shared/logger.py`)

- **ê¸°ëŠ¥**: ë¡œê·¸ íŒŒì¼ ìë™ ìƒì„± (ë””ë ‰í† ë¦¬ ì—†ìœ¼ë©´ ìƒì„±)
- **í¬ë§·**: `%(asctime)s - %(name)s - %(levelname)s - %(message)s`
- **ì¸ì½”ë”©**: UTF-8

### 2. ë¡œê·¸ íŒŒì¼ ê²½ë¡œ ì„¤ì • íŒ¨í„´

ëª¨ë“  ëª¨ë“ˆì—ì„œ ë‹¤ìŒ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ëœ ë¡œê·¸ íŒŒì¼ ê²½ë¡œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:

```python
from shared.path_utils import get_cointicker_root
from shared.logger import setup_logger

cointicker_root = get_cointicker_root()
log_file = str(cointicker_root / "logs" / "{module_name}.log")
logger = setup_logger(__name__, log_file=log_file)
````

### 3. Kafka Client (loguru ì‚¬ìš©)

loguruë¥¼ ì‚¬ìš©í•˜ëŠ” `kafka_client.py`ëŠ” ë³„ë„ ì„¤ì •:

```python
from loguru import logger
from shared.path_utils import get_cointicker_root

cointicker_root = get_cointicker_root()
log_file = cointicker_root / "logs" / "kafka_client.log"
log_file.parent.mkdir(parents=True, exist_ok=True)

logger.add(
    str(log_file),
    rotation="10 MB",      # 10MBë§ˆë‹¤ ë¡œê·¸ íŒŒì¼ íšŒì „
    retention="7 days",    # 7ì¼ í›„ ì˜¤ë˜ëœ ë¡œê·¸ ì‚­ì œ
    encoding="utf-8",
    level="INFO"
)
```

---

## ğŸ“Š ë¡œê·¸ íŒŒì¼ë³„ ìš©ë„

| ë¡œê·¸ íŒŒì¼                 | ìš©ë„                                           | ìƒì„± ì£¼ê¸°            |
| ------------------------- | ---------------------------------------------- | -------------------- |
| `scrapy.log`              | Scrapy ìŠ¤íŒŒì´ë” ì‹¤í–‰ ë¡œê·¸                      | ìŠ¤íŒŒì´ë” ì‹¤í–‰ ì‹œ     |
| `kafka_pipeline.log`      | Kafka Pipeline ì²˜ë¦¬ ë¡œê·¸                       | ìŠ¤íŒŒì´ë” ì‹¤í–‰ ì‹œ     |
| `kafka_consumer.log`      | Kafka Consumer ì„œë¹„ìŠ¤ ë¡œê·¸                     | Consumer ì‹¤í–‰ ì‹œ     |
| `kafka_client.log`        | Kafka Client (Producer/Consumer) ë¡œê·¸          | Kafka ì‘ì—… ì‹œ        |
| `hdfs_client.log`         | HDFS í´ë¼ì´ì–¸íŠ¸ ì—°ê²°/ì‘ì—… ë¡œê·¸                 | HDFS ì‘ì—… ì‹œ         |
| `hdfs_upload_manager.log` | HDFS ì—…ë¡œë“œ ë§¤ë‹ˆì € ì¬ì‹œë„/ì—ëŸ¬ ë¡œê·¸            | HDFS ì—…ë¡œë“œ ì‹œ       |
| `backend_api.log`         | Backend API ìš”ì²­/ì‘ë‹µ ë¡œê·¸                     | API ì„œë²„ ì‹¤í–‰ ì‹œ     |
| `gui.log`                 | GUI ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸                          | GUI ì‹¤í–‰ ì‹œ          |
| `orchestrator.log`        | Pipeline Orchestrator ë¡œê·¸                     | Orchestrator ì‹¤í–‰ ì‹œ |
| `scheduler.log`           | Scheduler ë¡œê·¸                                 | Scheduler ì‹¤í–‰ ì‹œ    |
| `pipelines.log`           | Scrapy Pipelines (Validation, Duplicates) ë¡œê·¸ | ìŠ¤íŒŒì´ë” ì‹¤í–‰ ì‹œ     |
| `{process_name}.log`      | Process Monitorê°€ ìƒì„±í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë³„ ë¡œê·¸     | í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§ ì‹œ |

---

## âœ… ê²€ì¦ ë°©ë²•

### 1. ë¡œê·¸ ë””ë ‰í† ë¦¬ í™•ì¸

```bash
cd PICU/cointicker
ls -la logs/
```

### 2. ê° íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ ì‹¤í–‰ í›„ ë¡œê·¸ íŒŒì¼ ìƒì„± í™•ì¸

```bash
# Scrapy ìŠ¤íŒŒì´ë” ì‹¤í–‰
cd worker-nodes/cointicker
scrapy crawl upbit_trends -s CLOSESPIDER_ITEMCOUNT=5

# ë¡œê·¸ íŒŒì¼ í™•ì¸
ls -lh ../logs/
```

### 3. ë¡œê·¸ íŒŒì¼ ë‚´ìš© í™•ì¸

```bash
# ìµœê·¼ ë¡œê·¸ í™•ì¸
tail -f logs/scrapy.log
tail -f logs/kafka_pipeline.log
tail -f logs/hdfs_client.log
```

---

## ğŸ¯ ê°œì„  ì‚¬í•­

### ì™„ë£Œëœ ì‘ì—…

1. âœ… ëª¨ë“  íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ì— ë¡œê·¸ íŒŒì¼ ì„¤ì • ì¶”ê°€
2. âœ… ì¼ê´€ëœ ë¡œê·¸ íŒŒì¼ ê²½ë¡œ íŒ¨í„´ ì ìš©
3. âœ… ë¡œê·¸ ë””ë ‰í† ë¦¬ ìë™ ìƒì„± ë¡œì§ í™•ì¸
4. âœ… loguru ì‚¬ìš© ëª¨ë“ˆ (kafka_client) íŒŒì¼ ë¡œê¹… ì¶”ê°€

### ê¶Œì¥ ì‚¬í•­

1. **ë¡œê·¸ ë””ë ‰í† ë¦¬ í†µí•©**: `worker-nodes/logs/` ë° `worker-nodes/cointicker/logs/`ëŠ” ì •ë¦¬í•˜ì—¬ `cointicker/logs/`ë¡œ í†µí•©
2. **ë¡œê·¸ ë¡œí…Œì´ì…˜**: ëŒ€ìš©ëŸ‰ ë¡œê·¸ íŒŒì¼ ê´€ë¦¬ë¥¼ ìœ„í•´ ë¡œê·¸ ë¡œí…Œì´ì…˜ ì„¤ì • ê³ ë ¤
3. **ë¡œê·¸ ë ˆë²¨ ê´€ë¦¬**: í™˜ê²½ë³„(ê°œë°œ/í”„ë¡œë•ì…˜) ë¡œê·¸ ë ˆë²¨ ì„¤ì • ë¶„ë¦¬
4. **ë¡œê·¸ ëª¨ë‹ˆí„°ë§**: ë¡œê·¸ íŒŒì¼ í¬ê¸° ë° ì—ëŸ¬ ë°œìƒ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•

---

## ğŸ“ ì°¸ê³  ì‚¬í•­

### ë¡œê·¸ íŒŒì¼ í¬ê¸° ê´€ë¦¬

- **Kafka Client**: loguruì˜ ìë™ ë¡œí…Œì´ì…˜ ì‚¬ìš© (10MB, 7ì¼ ë³´ê´€)
- **ê¸°íƒ€ ë¡œê·¸**: ìˆ˜ë™ ë¡œí…Œì´ì…˜ ë˜ëŠ” ì™¸ë¶€ ë„êµ¬(ì˜ˆ: logrotate) ì‚¬ìš© ê¶Œì¥

### ë¡œê·¸ ë ˆë²¨

- **ê¸°ë³¸ ë ˆë²¨**: INFO
- **ë””ë²„ê¹… ì‹œ**: í™˜ê²½ ë³€ìˆ˜ë‚˜ ì„¤ì • íŒŒì¼ì—ì„œ DEBUG ë ˆë²¨ë¡œ ë³€ê²½ ê°€ëŠ¥

### ë¡œê·¸ íŒŒì¼ ê¶Œí•œ

- ëª¨ë“  ë¡œê·¸ íŒŒì¼ì€ UTF-8 ì¸ì½”ë”©ìœ¼ë¡œ ì €ì¥
- íŒŒì¼ ìƒì„± ì‹œ ìë™ìœ¼ë¡œ ë””ë ‰í† ë¦¬ ìƒì„± (`mkdir(parents=True, exist_ok=True)`)

---

## ğŸ” ë¬¸ì œ í•´ê²°

### ë¡œê·¸ íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•ŠëŠ” ê²½ìš°

1. `logs/` ë””ë ‰í† ë¦¬ ê¶Œí•œ í™•ì¸
2. `get_cointicker_root()` í•¨ìˆ˜ê°€ ì˜¬ë°”ë¥¸ ê²½ë¡œë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸
3. ë¡œê·¸ íŒŒì¼ ê²½ë¡œì— íŠ¹ìˆ˜ ë¬¸ìê°€ í¬í•¨ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸

### ë¡œê·¸ íŒŒì¼ì´ ë„ˆë¬´ í° ê²½ìš°

1. ë¡œê·¸ ë ˆë²¨ì„ INFOì—ì„œ WARNINGìœ¼ë¡œ ë³€ê²½
2. ë¡œê·¸ ë¡œí…Œì´ì…˜ ì„¤ì • í™•ì¸
3. ì˜¤ë˜ëœ ë¡œê·¸ íŒŒì¼ ì •ë¦¬

---

**ì‘ì„±ì**: Juns AI Assistant
**ê²€í†  í•„ìš”**: ë¡œê·¸ ë””ë ‰í† ë¦¬ í†µí•© ì‘ì—…
**ë‹¤ìŒ ë‹¨ê³„**: ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶• ê²€í† 
